"use strict";(self.webpackChunkSequenceServer=self.webpackChunkSequenceServer||[]).push([[472,144],{2144:(e,t,r)=>{r.r(t),r.d(t,{Databases:()=>h});var a=r(6540),n=r(6860),s=r(4848);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function l(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,u(a.key),a)}}function u(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}function d(e,t,r){return t=b(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var h=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=d(this,t,[e])).state={type:"",currentlySelectedDatabases:[]},r.preSelectedDbs=r.props.preSelectedDbs,r.databases=r.databases.bind(r),r.nselected=r.nselected.bind(r),r.categories=r.categories.bind(r),r.handleToggle=r.handleToggle.bind(r),r.renderDatabases=r.renderDatabases.bind(r),r.renderDatabase=r.renderDatabase.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(a=[{key:"componentDidUpdate",value:function(e,t){this.databases()&&1===this.databases().length&&0===this.state.currentlySelectedDatabases.length&&this.setState({currentlySelectedDatabases:this.databases()}),this.preSelectedDbs&&0!==this.preSelectedDbs.length&&(this.setState({currentlySelectedDatabases:this.preSelectedDbs}),this.preSelectedDbs=null);var r=this.state.currentlySelectedDatabases[0]?this.state.currentlySelectedDatabases[0].type:"";r!=this.state.type&&(this.setState({type:r}),this.props.onDatabaseTypeChanged(r)),t.currentlySelectedDatabases!==this.state.currentlySelectedDatabases&&this.props.onDatabaseSelectionChanged(this.state.currentlySelectedDatabases)}},{key:"databases",value:function(e){var t=this.props.databases;return e&&(t=n.Ay.select(t,(function(t){return t.type===e}))),n.Ay.sortBy(t,"title")}},{key:"nselected",value:function(){return this.state.currentlySelectedDatabases.length}},{key:"categories",value:function(){return n.Ay.uniq(n.Ay.map(this.props.databases,n.Ay.iteratee("type"))).sort()}},{key:"handleToggle",value:function(e,t){switch(e){case"[Select all]":this.setState({currentlySelectedDatabases:this.databases(t)});break;case"[Deselect all]":this.setState({currentlySelectedDatabases:[]})}}},{key:"renderDatabases",value:function(e){var t=e[0].toUpperCase()+e.substring(1).toLowerCase()+" databases",r=1===this.categories().length?"col-span-2":"",a="[Select all]",i="px-2 text-base md:text-lg",o=this.databases(e).length>1,c=this.state.type&&this.state.type!==e;return i+=o&&c?" text-gray-400":" text-seqblue",o||(i+=" hidden"),this.nselected()===this.databases(e).length&&(a="[Deselect all]"),(0,s.jsx)("div",{className:r,children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"border-b border-seqorange mb-2",children:[(0,s.jsx)("h4",{className:"font-medium inline text-base md:text-lg",children:t}),(0,s.jsx)("button",{type:"button",className:i,disabled:c,onClick:function(){this.handleToggle(a,e)}.bind(this),children:a})]}),(0,s.jsx)("ul",{className:"databases "+e,children:n.Ay.map(this.databases(e),n.Ay.bind((function(t,r){return(0,s.jsx)("li",{className:"text-base md:text-lg leading-tight md:leading-tight",children:this.renderDatabase(t)},"DB_"+e+r)}),this))})]})},"DB_"+e)}},{key:"handleDatabaseSelectionClick",value:function(e){this.state.currentlySelectedDatabases.some((function(t){return t.id===e.id}))?this.setState((function(t){return{currentlySelectedDatabases:t.currentlySelectedDatabases.filter((function(t){return t.id!==e.id}))}})):this.setState((function(t){return{currentlySelectedDatabases:[].concat(o(t.currentlySelectedDatabases),[e])}}))}},{key:"renderDatabase",value:function(e){var t=this.state.type&&this.state.type!==e.type,r=this.state.currentlySelectedDatabases.some((function(t){return t.id===e.id}));return(0,s.jsxs)("label",{className:t?"database text-gray-400":"database text-seqblue",children:[(0,s.jsx)("input",{type:"checkbox",name:"databases[]",value:e.id,"data-type":e.type,disabled:t,checked:r,className:"checkbox-database",onChange:n.Ay.bind((function(){this.handleDatabaseSelectionClick(e)}),this)})," "+(e.title||e.name)]})}},{key:"render",value:function(){return(0,s.jsx)("div",{className:"my-6 grid md:grid-cols-2 gap-4",children:n.Ay.map(this.categories(),this.renderDatabases)})}}])&&l(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a}(a.Component)},5515:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f}),r(6540);var a=r(6860),n=(r(1460),r(2144)),s=(r(9385),r(4848)),i=r(4692);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,l(a.key),a)}}function l(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}function u(e,t,r){return t=A(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}var f=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=u(this,t,[e])).handleLoadTree=r.handleLoadTree.bind(r),r.renderDatabases=r.renderDatabases.bind(r),r.renderDatabaseSearch=r.renderDatabaseSearch.bind(r),r.renderDatabaseTree=r.renderDatabaseTree.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),r=t,(n=[{key:"handleLoadTree",value:function(e){var t="#"+e+"_database_tree";window.jstree_node_change_timeout=null,window.jstree_rapid_timeout=null;var r=this;i(t).on("select_node.jstree deselect_node.jstree",(function(a,n){window.jstree_node_change_timeout&&clearTimeout(window.jstree_node_change_timeout),window.jstree_rapid_timeout&&clearTimeout(window.jstree_rapid_timeout),window.jstree_rapid_timeout=setTimeout((function(){window.jstree_node_change_timeout=setTimeout((function(){r.categories().filter((function(t){return t!==e})).forEach((function(e){return i("#".concat(e,"_database_tree")).jstree("uncheck_all")}));var a=i(t).jstree("get_selected").filter((function(e){return 32===e.length})),n=r.databases(e).filter((function(e){return a.includes(e.id)}));r.selectDatabases(n)}),100)}),100)})),i(t).jstree({core:{data:this.props.tree[e]},plugins:["checkbox","search","sort"],checkbox:{keep_selected_style:!1}})}},{key:"selectDatabases",value:function(e){this.setState({currentlySelectedDatabases:e})}},{key:"handleTreeSearch",value:function(e,t,r){var a=i("#"+r).val();i("#"+t).jstree(!0).search(a)}},{key:"renderDatabases",value:function(e){var t=e[0].toUpperCase()+e.substring(1).toLowerCase()+" databases",r=1===this.categories().length?"col-span-2":"",n="[Select all]",i="px-2 text-base md:text-lg hidden",o=this.databases(e).length>1,c=this.state.type&&this.state.type!==e;return i+=o&&c?" text-gray-400":" text-seqblue",o||(i+=" hidden"),this.nselected()===this.databases(e).length&&(n="[Deselect all]"),(0,s.jsxs)("div",{className:r,children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"border-b border-seqorange mb-2",id:"database_list",children:[(0,s.jsx)("h4",{className:"font-medium text-base md:text-lg",children:t}),this.renderDatabaseSearch(e),(0,s.jsx)("button",{type:"button",className:i,disabled:c,onClick:function(){this.handleToggle(n,e)}.bind(this),children:n})]}),(0,s.jsx)("ul",{className:"databases hidden text-lg "+e,children:a.Ay.map(this.databases(e),a.Ay.bind((function(t,r){return(0,s.jsx)("li",{children:this.renderDatabase(t)},"DB_"+e+r)}),this))})]}),this.renderDatabaseTree(e)]},"DB_"+e)}},{key:"renderDatabaseSearch",value:function(e){var t=e+"_database_tree",r=t+"_search";return(0,s.jsx)("input",{type:"text",id:r,className:"border rounded px-1",placeholder:"Search...",onKeyUp:a.Ay.bind((function(){this.handleTreeSearch(e,t,r)}),this)})}},{key:"renderDatabaseTree",value:function(e){var t=e+"_database_tree";return this.props.tree[e],(0,s.jsx)("div",{id:t,className:"jstree_div",onClick:a.Ay.bind((function(){this.handleLoadTree(e)}),this)})}}])&&c(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(n.Databases)},8819:e=>{e.exports="data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAINjI+AC7rWHIsPtmoxLAA7"},8612:e=>{e.exports="data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAIORI4JlrqN1oMSnmmZDQUAOw=="},4095:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAMAAAB/qqA+AAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlMNAMM9s3UAAAAXSURBVHjajcEBAQAAAIKg/H/aCQZ70AUBjAATb6YPDgAAAABJRU5ErkJggg=="},2466:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAACAQMAAABv1h6PAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMHBgAAiABBI4gz9AAAAABJRU5ErkJggg=="},1037:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg=="},7475:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAACAQMAAAAD0EyKAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjgIIGBgABCgCBvVLXcAAAAABJRU5ErkJggg=="},3010:e=>{e.exports="data:image/svg+xml;utf8,<svg xmlns=%27http://www.w3.org/2000/svg%27><filter id=%27jstree-grayscale%27><feColorMatrix type=%27matrix%27 values=%270.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0%27/></filter></svg>#jstree-grayscale"}}]);
//# sourceMappingURL=472.js.map