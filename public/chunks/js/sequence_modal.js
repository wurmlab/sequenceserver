/*! For license information please see sequence_modal.js.LICENSE.txt */
"use strict";(self.webpackChunkSequenceServer=self.webpackChunkSequenceServer||[]).push([[674],{6563:(t,e,n)=>{n.r(e),n.d(e,{default:()=>R});var o=n(4692),r=n.n(o),s=n(4692);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}!function t(e,n,o){function r(s,a){if(!n[s]){if(!e[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};e[s][0].call(u.exports,(function(t){return r(e[s][1][t]||t)}),u,u.exports,t,e,n,o)}return n[s].exports}for(var i=void 0,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,o){r().browser=t("jquery-browser-plugin");var c=t("js-class"),u="onSelectionChange",l="onSelectionChanged";n.g.Sequence=c({constructor:function(t){var e=this;this.opt=s.extend(this.opt,t),this._container=s(this.opt.target),0==this._container.length&&(this._container=s("#"+this.opt.target)),0==this._container.length&&console.log("empty target container"),this.opt.target=this._container[0].id,this._container.ready((function(){this._ready=!1,e._initialize()}))},opt:{sequence:"",id:"",target:"",format:"FASTA",selection:{start:0,end:0},columns:{size:35,spacedEach:10},highlights:[],annotations:[],sequenceUrl:"http://www.ebi.ac.uk/das-srv/uniprot/das/uniprot/sequence",selectionColor:"Yellow",selectionFontColor:"black",highlightFontColor:"red",highlightBackgroundColor:"white",fontColor:"inherit",backgroundColor:"inherit",width:void 0,height:void 0,formatSelectorVisible:!0},eventTypes:["onSelectionChanged","onSelectionChange","onAnnotationClicked"],getId:function(){return this.opt.id},_headerDiv:null,_contentDiv:null,_initialize:function(){void 0!==this.opt.width&&this._container.width(this.opt.width),void 0!==this.opt.height&&this._container.height(this.opt.height),this._buildFormatSelector(),this._contentDiv=s("<div/>").appendTo(this._container),this._highlights=this.opt.highlights,this._annotations=this.opt.annotations;var t="sequenceTip"+this.opt.target;s('<div id="'+t+'"></div>').appendTo(".fastan-content").addClass("absolute top-0 left-0").show(),this.opt._tooltip=document.getElementById(t),this.opt.sequence?this._redraw():this.opt.id?this._requestSequence(this.opt.id):this.clearSequence("No sequence available","../biojs/css/images/warning_icon.png"),this._ready=!0},setSequence:function(t,e){t.match(/^([A-N,R-Z][0-9][A-Z][A-Z, 0-9][A-Z, 0-9][0-9])|([O,P,Q][0-9][A-Z, 0-9][A-Z, 0-9][A-Z, 0-9][0-9])(\.\d+)?$/i)?this._requestSequence(arguments[0]):(this.opt.sequence=t,this.opt.id=e,this._highlights=[],this._highlightsCount=0,this.opt.selection={start:0,end:0},this._annotations=[],this._contentDiv.children().remove(),this._redraw())},_requestSequence:function(t){var e=this;console.log("Requesting sequence for: "+t),s.ajax({url:e.opt.sequenceUrl,dataType:"xml",data:{segment:t}}).done((function(t){try{var n=s(t).find("SEQUENCE:first");e.setSequence(n.text(),n.attr("id"),n.attr("label"))}catch(t){console.log("Error decoding response data: "+t.message),e.clearSequence("No sequence available","../biojs/css/images/warning_icon.png")}})).fail((function(t,n,o){console.log("Error requesting the sequence: "+n),e.clearSequence("Error requesting the sequence to the server "+this.url,"../biojs/css/images/warning_icon.png")}))},clearSequence:function(t,e){var n=void 0;this.opt.sequence="",this.opt.id="",this._highlights=[],this._highlightsCount=0,this.opt.selection={start:0,end:0},this._annotations=[],this._contentDiv.children().remove(),this._headerDiv.hide(),void 0!==t&&(n=s("<div>"+t+"</div>").appendTo(this._contentDiv).addClass("message"),void 0!==e&&n.css({background:'transparent url("'+e+'") no-repeat center left',"padding-left":"20px"}))},setSelection:function(t,e){if(t>e){var n=e;e=t,t=n}t==this.opt.selection.start&&e==this.opt.selection.end||(this._setSelection(t,e),this.trigger(l,{start:t,end:e}))},_buildFormatSelector:function(){var t=this;console.log("build format selector container",this._container),this._headerDiv=s("<div></div>").appendTo(this._container),this._headerDiv.append("Format: "),this._formatSelector=s('<select> <option value="FASTA">FASTA</option><option value="CODATA">CODATA</option><option value="PRIDE">PRIDE</option><option value="RAW">RAW</option></select>').appendTo(t._headerDiv),this._formatSelector.change((function(e){t.opt.format=s(this).val(),t._redraw()})),this._formatSelector.val(t.opt.format),this.formatSelectorVisible(this.opt.formatSelectorVisible)},addHighlight:function(t){var e="-1",n="",o="",r={};return t instanceof Object&&t.start<=t.end&&(n="string"==typeof t.color?t.color:this.opt.highlightFontColor,o="string"==typeof t.background?t.background:this.opt.highlightBackgroundColor,e="string"==typeof t.id?t.id:new Number(this._highlightsCount++).toString(),r={start:t.start,end:t.end,color:n,background:o,id:e},this._highlights.push(r),this._applyHighlight(r),this._restoreSelection(t.start,t.end)),e},_applyHighlight:function(t){for(var e=0,n=0,o=this._contentDiv.find(".sequence"),r=t.start-1;r<t.end;r++)"auto"==s(o[r]).css("z-index")?(e=1,n=1):(e=0,n=.5),s(o[r]).css({color:t.color,"background-color":t.background,"z-index":e,opacity:n}).addClass("highlighted")},_applyHighlights:function(t){for(var e in t)this._applyHighlight(t[e])},_restoreHighlights:function(t,e){var n=this._highlights;for(var o in this._applyHighlight({start:t,end:e,color:this.opt.fontColor,background:this.opt.backgroundColor}),n)n[o].start>e||n[o].end<t||(a=n[o].start<t?t:n[o].start,b=n[o].end>e?e:n[o].end,this._applyHighlight({start:a,end:b,color:n[o].color,background:n[o].background}))},_restoreSelection:function(t,e){var n=this.opt.selection;t>n.end||e<n.start||(a=t<n.start?n.start:t,b=e>n.end?n.end:e,this._applyHighlight({start:a,end:b,color:this.opt.selectionFontColor,background:this.opt.selectionColor}))},removeHighlight:function(t){var e=this._highlights;for(i in e)if(e[i].id==t){start=e[i].start,end=e[i].end,e.splice(i,1),this._restoreHighlights(start,end),this._restoreSelection(start,end);break}},removeAllHighlights:function(){this._highlights=[],this._restoreHighlights(1,this.opt.sequence.length),this._restoreSelection(1,this.opt.sequence.length)},setFormat:function(t){this.opt.format!=t.toUpperCase()&&(this.opt.format=t.toUpperCase(),this._redraw());var e=this;this._headerDiv.find("option").each((function(){s(this).val()==e.opt.format.toUpperCase()&&s(this).attr("selected","selected")}))},setNumCols:function(t){this.opt.columns.size=t,this._redraw()},formatSelectorVisible:function(t){t?this._headerDiv.show():this._headerDiv.hide()},showFormatSelector:function(){this._headerDiv.show()},hideFormatSelector:function(){this._headerDiv.hide()},hide:function(){this._headerDiv.hide(),this._contentDiv.hide()},show:function(){this._headerDiv.show(),this._contentDiv.show()},_setSelection:function(t,e){var n=this.opt.selection,o={};n.start==t?n.end<e?(o.start=n.end,o.end=e):this._restoreHighlights(e+1,n.end):n.end==e?n.start>t?(o.start=t,o.end=n.start):this._restoreHighlights(n.start,t-1):(this._restoreHighlights(n.start,n.end),o.start=t,o.end=e),n.start=t,n.end=e},_repaintSelection:function(){var t=this.opt.selection;this._setSelection(0,0),this._setSelection(t.start,t.end)},_redraw:function(){this._contentDiv.children().remove(),"RAW"==this.opt.format?this._drawRaw():"CODATA"==this.opt.format?this._drawCodata():"FASTA"==this.opt.format?this._drawFasta():(this.opt.format="PRIDE",this._drawPride()),this._applyHighlights(this._highlights),this._repaintSelection(),this._addSpanEvents()},_drawFasta:function(){var t=this.opt.sequence.toUpperCase().split(""),e=s("<pre></pre>").appendTo(this._contentDiv),n=">"+this.opt.id+" "+t.length+" bp<br/>",o=this.opt.columns.size;this.opt.sequence.length<this.opt.columns.size&&(o=this.opt.sequence.length);var r={numCols:o,numColsForSpace:0};n+=this._drawSequence(t,r),e.html(n),this._drawAnnotations(r)},_drawCodata:function(){var t=this.opt.sequence.toUpperCase().split("");void 0!==this.opt.formatOptions&&void 0!==this.opt.formatOptions.title&&0!=this.opt.formatOptions.title&&r()("<pre/>").addClass("header").appendTo(this._contentDiv).html("ENTRY           "+this.opt.id+"<br/>SEQUENCE<br/>");var e=this.opt.columns.size;this.opt.sequence.length<this.opt.columns.size&&(e=this.opt.sequence.length);var n={numLeft:!0,numLeftSize:7,numLeftPad:" ",numTop:!0,numTopEach:5,numCols:e,numColsForSpace:0,spaceBetweenChars:!0};this._drawSequence(t,n),void 0!==this.opt.formatOptions&&void 0!==this.opt.formatOptions.footer&&0!=this.opt.formatOptions.footer&&r()("<pre/>").addClass("footer").appendTo(this._contentDiv).html("<br/>///"),this._drawAnnotations(n)},_drawAnnotations:function(t){var e=this,n=this.opt.sequence.toLowerCase().split(""),o=this._annotations,r="",i="",a="";t.numLeft&&(r+=this._formatIndex(" ",t.numLeftSize+2," "));for(var c=0;c<n.length;c+=t.numCols){for(var u in i="",o)o[u].id=this.getId()+"_"+u,(a=this._getHTMLRowAnnot(c+1,o[u],t)).length>0&&(i+="<br/>",i+=r,i+=a,i+="<br/>");var l=t.numCols,h=n.length-c;h<l&&(l=h),t.numRight?s(i).insertAfter("div#"+e.opt.target+" div pre span#numRight_"+this.getId()+"_"+(c+l)):s(i).insertAfter("div#"+e.opt.target+" div pre span#"+this.getId()+"_"+(c+l))}s(this._contentDiv).find(".annotation").each((function(){e._addToolTip(this,(function(){return e._getAnnotationString(s(this).attr("id"))})),s(this).mouseover((function(t){s(".annotation."+s(t.target).attr("id")).each((function(){s(this).css("background-color",s(this).attr("color"))}))})).mouseout((function(){s(".annotation").css("background-color","transparent")})).click((function(t){for(var n=void 0,o=s(t.target).attr("id"),r=0;r<e._annotations.length;r++)e._annotations[r].id!=o||(n=e._annotations[r].name);e.trigger("onAnnotationClicked",{name:n})}))}))},_getAnnotationString:function(t){var e=this._annotations[t.substr(t.indexOf("_")+1)];return e.name+"<br/>"+(e.html?e.html:"")},_getHTMLRowAnnot:function(t,e,n){for(var o=[],r=t+n.numCols,i=n.spaceBetweenChars?" ":"",s=e.color,a=e.id,c=t;c<r;c++)for(var u in e.regions)region=e.regions[u],spaceAfter="",spaceAfter+=c%n.numColsForSpace==0?" ":"",spaceAfter+=i,color=region.color?region.color:s,data='class="annotation '+a+'" id="'+a+'" color="'+color+'" pos="'+c+'"',c==region.start&&c==region.end?(o[c]='<span style="border-left:1px solid; border-right:1px solid; border-bottom:1px solid; border-color:'+color+'" '+data+"> ",o[c]+=spaceAfter,o[c]+="</span>"):c==region.start?(o[c]='<span style="border-left:1px solid; border-bottom:1px solid; border-color:'+color+'" '+data+"> ",o[c]+=spaceAfter,o[c]+="</span>"):c==region.end?(o[c]='<span style="border-bottom:1px solid; border-right:1px solid; border-color:'+color+' " '+data+"> ",o[c]+="</span>"):c>region.start&&c<region.end?(o[c]='<span style="border-bottom:1px solid; border-color:'+color+'" '+data+"> ",o[c]+=spaceAfter,o[c]+="</span>"):o[c]||(o[c]=" ",o[c]+=spaceAfter);var l=o.join("");return-1==l.indexOf("span")?"":l},_drawRaw:function(){var t=this.opt.sequence.toLowerCase().split(""),e=s("<pre></pre>").appendTo(this._contentDiv),n=this.opt.columns.size;this.opt.sequence.length<this.opt.columns.size&&(n=this.opt.sequence.length);var o={numCols:n};e.html(this._drawSequence(t,o)),this._drawAnnotations(o)},_drawPride:function(){var t=this.opt.sequence.toUpperCase().split(""),e=this.opt.columns.size;this.opt.sequence.length<this.opt.columns.size&&(e=this.opt.sequence.length);var n={numLeft:!0,numLeftSize:5,numLeftPad:" ",numRight:!1,numRightSize:5,numRightPad:"",numCols:e,numColsForSpace:this.opt.columns.spacedEach};this._drawSequence(t,n),this._drawAnnotations(n)},_drawSequence:function(t,e){var n="",o="",i="\n",a="";if(e.numTop){o+='<span class="numTop pos-marker">';var c=e.spaceBetweenChars?2*e.numTopEach:e.numTopEach;e.numLeft&&(o+=this._formatIndex(" ",e.numLeftSize," ")),o+=this._formatIndex(" ",c," ");for(var u=e.numTopEach;u<e.numCols;u+=e.numTopEach)o+=this._formatIndex(u,c," ",!0);o+="</span>"}e.numLeft&&(n+='<span id="numLeft_'+this.getId()+'_0"',n+='class="pos-marker">',n+=this._formatIndex(1,e.numLeftSize,e.numLeftPad),n+="  ",n+="</span>",n+="\n");for(var l=1,h=1;h<=t.length;h++)if(h%e.numCols==0){a+='<span class="sequence" id="'+this.getId()+"_"+h+'">'+t[h-1]+"</span>",e.numRight&&(i+='<span id="numRight_'+this.getId()+"_"+h+'"',i+='class="pos-marker">',i+="  ",i+=this._formatIndex(h,e.numRightSize,e.numRightPad),i+="</span>",i+="\n"),a+="<br/>";var p=t.length-h;e.numLeft&&p>0&&(n+='<span id="numLeft_'+this.getId()+"_"+h+'"',n+='class="pos-marker">',n+=this._formatIndex(h+1,e.numLeftSize,e.numLeftPad),n+="  ",n+="</span>",n+="\n"),l=1}else a+='<span class="sequence" id="'+this.getId()+"_"+h+'"',a+=l%e.numColsForSpace==0?' style="letter-spacing: 1em;"':"",a+=e.spaceBetweenChars?' style="letter-spacing: 1em;"':"",a+='">'+t[h-1],a+="</span>",l++;return a+="<br/>",s.browser.msie&&(a="<pre>"+a+"</pre>"),e.numTop&&r()("<pre/>").html(o).addClass("indT").css({color:"#aaa"}).appendTo(this._contentDiv),e.numLeft&&r()("<pre/>").html(n).addClass("indL hidden sm:inline-block").appendTo(this._contentDiv),r()("<pre/>").html(a).addClass("seqF inline-block").appendTo(this._contentDiv),e.numRight&&r()("<pre/>").html(i).addClass("indR").css({color:"#aaa",display:"inline-block"}).appendTo(this._contentDiv),a},_formatIndex:function(t,e,n,o){var r=t.toString(),i="",s=e-r.length;if(s>0){for(;s-- >0;)i+="<span>"+n+"</span>";r=o?t+i:i+t}return r},_addSpanEvents:function(){var t,e,n=this,o=!1;n._contentDiv.find(".sequence").each((function(){s(this).mousedown((function(){var r=s(this).attr("id");e=parseInt(r.substr(r.indexOf("_")+1)),t=e,n._setSelection(t,e),o=!0,n.trigger(u,{start:n.opt.selection.start,end:n.opt.selection.end})})).mouseover((function(){var r=s(this).attr("id");e=parseInt(r.substr(r.indexOf("_")+1)),o&&(e>t?n._setSelection(t,e):n._setSelection(e,t),n.trigger(u,{start:n.opt.selection.start,end:n.opt.selection.end}))})).mouseup((function(){o=!1,n.trigger(l,{start:n.opt.selection.start,end:n.opt.selection.end})})),n._addToolTip.call(n,this,(function(){return o?"["+n.opt.selection.start+", "+n.opt.selection.end+"]":e}))})).css("cursor","pointer")},_addToolTip:function(t,e){var n=this.opt._tooltip;s(t).mouseover((function(o){var r=s(o.target).offset(),i=s(o.target).closest(".seqF").offset();s(n).is(":visible")||s(n).css({"background-color":"#000",padding:"3px 10px 3px 10px",top:r.top-i.top+s(o.target).height()+15+"px",left:r.left-i.left+s(o.target).width()+70+"px",color:"#fff","font-size":"12px",position:"absolute"}).animate({opacity:"0.85"},10).html(e.call(t)).show()})).mouseout((function(){s(n).hide()}))},addAnnotation:function(t){this._annotations.push(t),this._redraw()},removeAnnotation:function(t){for(var e=0;e<this._annotations.length;e++)if(t!=this._annotations[e].name){this._annotations.splice(e,1),this._redraw();break}},removeAllAnnotations:function(){this._annotations=[],this._redraw()}}),t("biojs-events").mixin(Sequence.prototype)},{"biojs-events":2,"jquery-browser-plugin":20,"js-class":22}],2:[function(t,e,n){var o=t("backbone-events-standalone");o.onAll=function(t,e){return this.on("all",t,e),this},o.oldMixin=o.mixin,o.mixin=function(t){o.oldMixin(t);for(var e=["onAll"],n=0;n<e.length;n++){var r=e[n];t[r]=this[r]}return t},e.exports=o},{"backbone-events-standalone":4}],3:[function(t,e,n){!function(){var t,o={},r=Array.prototype.forEach,i=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,u={keys:Object.keys||function(t){if("object"!==c(t)&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++a+"";return t?t+e:e},has:function(t,e){return i.call(t,e)},each:function(t,e,n){if(null!=t)if(r&&t.forEach===r)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,s=t.length;i<s;i++)if(e.call(n,t[i],i,t)===o)return}else for(var a in t)if(this.has(t,a)&&e.call(n,t[a],a,t)===o)return},once:function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments),t=null),e}}};t={on:function(t,e,n){return h(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,e,n){if(!h(this,"once",t,[e,n])||!e)return this;var o=this,r=u.once((function(){o.off(t,r),e.apply(this,arguments)}));return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var o,r,i,s,a,c,l,p;if(!this._events||!h(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=0,c=(s=t?[t]:u.keys(this._events)).length;a<c;a++)if(t=s[a],i=this._events[t]){if(this._events[t]=o=[],e||n)for(l=0,p=i.length;l<p;l++)r=i[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&o.push(r);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],o=this._events.all;return n&&p(n,e),o&&p(o,arguments),this},stopListening:function(t,e,n){var o=this._listeners;if(!o)return this;var r=!e&&!n;for(var i in"object"===c(e)&&(n=this),t&&((o={})[t._listenerId]=t),o)o[i].off(e,n,this),r&&delete this._listeners[i];return this}};var l=/\s+/,h=function(t,e,n,o){if(!n)return!0;if("object"===c(n)){for(var r in n)t[e].apply(t,[r,n[r]].concat(o));return!1}if(l.test(n)){for(var i=n.split(l),s=0,a=i.length;s<a;s++)t[e].apply(t,[i[s]].concat(o));return!1}return!0},p=function(t,e){var n,o=-1,r=t.length,i=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++o<r;)(n=t[o]).callback.call(n.ctx);return;case 1:for(;++o<r;)(n=t[o]).callback.call(n.ctx,i);return;case 2:for(;++o<r;)(n=t[o]).callback.call(n.ctx,i,s);return;case 3:for(;++o<r;)(n=t[o]).callback.call(n.ctx,i,s,a);return;default:for(;++o<r;)(n=t[o]).callback.apply(n.ctx,e)}};u.each({listenTo:"on",listenToOnce:"once"},(function(e,n){t[n]=function(t,n,o){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=u.uniqueId("l"))]=t,"object"===c(n)&&(o=this),t[e](n,o,this),this}})),t.bind=t.on,t.unbind=t.off,t.mixin=function(t){return u.each(["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"],(function(e){t[e]=this[e]}),this),t},"function"==typeof define?define((function(){return t})):void 0!==n?(void 0!==e&&e.exports&&(n=e.exports=t),n.BackboneEvents=t):this.BackboneEvents=t}()},{}],4:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":3}],5:[function(t,e,n){var o;o=t("nets"),e.exports=function(){function t(){}return t.read=function(t,e){var n;return n=this,o(t,(function(t,o,r){return n._onRetrieval(r,e)}))},t._onRetrieval=function(t,e){return e(this.parse(t))},t}()},{nets:12}],6:[function(t,e,n){var o,r,i,s={}.hasOwnProperty;i=t("./strings"),o=t("./generic_reader"),r=t("biojs-model").seq,e.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.parse=function(t){var e,n,o,s,a,c,u,l,h,p;for(l=[],"[object Array]"!==Object.prototype.toString.call(t)&&(t=t.split("\n")),h=0,p=t.length;h<p;h++)if(">"===(u=t[h])[0]||";"===u[0]){if(c=u.slice(1),e=new r("",c,l.length),l.push(e),i.contains("|",u)){for(s=c.split("|"),a=1;a<s.length;)n=s[a],o=s[a+1],e.meta[n]=o,a+=2;e.name=s[s.length-1]}}else e.seq+=u;return l},e}(o)},{"./generic_reader":5,"./strings":7,"biojs-model":10}],7:[function(t,e,n){var o;o={contains:function(t,e){return-1!=="".indexOf.call(t,e,0)}},e.exports=o},{}],8:[function(t,e,n){var o;(o={}).splitNChars=function(t,e){var n,o,r,i;for(o=[],n=r=0,i=t.length-1;e>0?r<=i:r>=i;n=r+=e)o.push(t.substr(n,e));return o},e.exports=o},{}],9:[function(t,e,n){var o;o=t("./utils"),e.exports=function(){function t(){}return t.export=function(t,e){var n,r,i,s;for(r="",i=0,s=t.length;i<s;i++)n=t[i],null!=e&&(n=e(n)),r+=">"+n.name+"\n",r+=o.splitNChars(n.seq,80).join("\n"),r+="\n";return r},t}()},{"./utils":8}],10:[function(t,e,n){e.exports.seq=t("./seq")},{"./seq":11}],11:[function(t,e,n){e.exports=function(t,e,n){this.seq=t,this.name=e,this.id=n,this.meta={}}},{}],12:[function(t,e,n){var o=t("request");e.exports=function(t,e,n){o(t,e,n)}},{request:13}],13:[function(t,e,n){var o=t("global/window"),r=t("once"),i=t("parse-headers"),s={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},a=o.XMLHttpRequest||u,c="withCredentials"in new a?a:o.XDomainRequest;function u(){}e.exports=function(t,e){"string"==typeof t&&(t={uri:t}),t=t||{},e=r(e);var n=t.xhr||null;n||(n=t.cors||t.useXDR?new c:new a);var o,l=n.url=t.uri||t.url,h=n.method=t.method||"GET",p=t.body||t.data,f=n.headers=t.headers||{},d=!!t.sync,v=!1,m=t.response?function(){var t=b(),o=g(),r=y(t,o),s={body:o,statusCode:t,statusText:n.statusText,raw:n};n.getAllResponseHeaders?s.headers=i(n.getAllResponseHeaders()):s.headers={},e(r,s,s.body)}:function(){var t=b(),o=y(t);n.status=n.statusCode=t,n.body=g(),n.headers=i(n.getAllResponseHeaders()),e(o,n,n.body)};if("json"in t&&(v=!0,f.Accept="application/json","GET"!==h&&"HEAD"!==h&&(f["Content-Type"]="application/json",p=JSON.stringify(t.json))),n.onreadystatechange=function(){4===n.readyState&&m()},n.onload=m,n.onerror=function(t){e(t,n)},n.onprogress=function(){},n.ontimeout=u,n.open(h,l,!d),(t.withCredentials||t.cors&&!1!==t.withCredentials)&&(n.withCredentials=!0),d||(n.timeout="timeout"in t?t.timeout:5e3),n.setRequestHeader)for(o in f)f.hasOwnProperty(o)&&n.setRequestHeader(o,f[o]);else if(t.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(n.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(n),n.send(p),n;function g(){var t=null;if(n.response?t=n.response:"text"!==n.responseType&&n.responseType||(t=n.responseText||n.responseXML),v)try{t=JSON.parse(t)}catch(t){}return t}function b(){return 1223===n.status?204:n.status}function y(t,e){var n=null;if(0===t||t>=400&&t<600){var o="string"==typeof e&&e||s[String(t).charAt(0)];(n=new Error(o)).statusCode=t}return n}}},{"global/window":14,once:15,"parse-headers":19}],14:[function(t,e,o){(function(t){"undefined"!=typeof window?e.exports=window:void 0!==t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(t,e,n){function o(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}e.exports=o,o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0})}))},{}],16:[function(t,e,n){var o=t("is-function");e.exports=function(t,e,n){if(!o(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===r.call(t)?function(t,e,n){for(var o=0,r=t.length;o<r;o++)i.call(t,o)&&e.call(n,t[o],o,t)}(t,e,n):"string"==typeof t?function(t,e,n){for(var o=0,r=t.length;o<r;o++)e.call(n,t.charAt(o),o,t)}(t,e,n):function(t,e,n){for(var o in t)i.call(t,o)&&e.call(n,t[o],o,t)}(t,e,n)};var r=Object.prototype.toString,i=Object.prototype.hasOwnProperty},{"is-function":17}],17:[function(t,e,n){e.exports=function(t){var e=o.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var o=Object.prototype.toString},{}],18:[function(t,e,n){(n=e.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],19:[function(t,e,n){var o=t("trim"),r=t("for-each");e.exports=function(t){if(!t)return{};var e={};return r(o(t).split("\n"),(function(t){var n,r=t.indexOf(":"),i=o(t.slice(0,r)).toLowerCase(),s=o(t.slice(r+1));void 0===e[i]?e[i]=s:(n=e[i],"[object Array]"===Object.prototype.toString.call(n)?e[i].push(s):e[i]=[e[i],s])})),e}},{"for-each":16,trim:18}],20:[function(t,e,n){e.exports=t("./jquery.browser")},{"./jquery.browser":21}],21:[function(t,e,n){var o,r,i=function(t){t=t.toLowerCase();var e=/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],n=/(ipad)/.exec(t)||/(iphone)/.exec(t)||/(android)/.exec(t)||/(windows phone)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/i.exec(t)||[];return{browser:e[3]||e[1]||"",version:e[2]||"0",platform:n[0]||""}};if(o=i(window.navigator.userAgent),(r={}).uaMatch=i,o.browser&&(r[o.browser]=!0,r.version=o.version,r.versionNumber=parseInt(o.version)),o.platform&&(r[o.platform]=!0),(r.android||r.ipad||r.iphone||r["windows phone"])&&(r.mobile=!0),(r.cros||r.mac||r.linux||r.win)&&(r.desktop=!0),(r.chrome||r.opr||r.safari)&&(r.webkit=!0),r.rv){var s="msie";o.browser=s,r[s]=!0}if(r.opr){var a="opera";o.browser=a,r[a]=!0}if(r.safari&&r.android){var c="android";o.browser=c,r[c]=!0}r.name=o.browser,r.platform=o.platform,e.exports=r},{}],22:[function(t,e,o){(function(t){function n(t,e,n){for(;e&&e!==Object.prototype&&(Object.getOwnPropertyNames(e).forEach((function(n){if(".class"!=n&&!t.hasOwnProperty(n)){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o)}})),!n);)e=e.__proto__;return t}var o=function(t,e,n){"function"!=typeof t&&(n=e,e=t,t=Object),e||(e={}),n||(n={});var r={name:n.name,base:t,implements:[]},i=o.clone(e);n.implements&&(Array.isArray(n.implements)?n.implements:[n.implements]).forEach((function(t){"function"==typeof t&&t.prototype&&(r.implements.push(t),o.extend(i,t.prototype))})),i.__proto__=t.prototype;var s=function(){"function"==typeof this.constructor&&this.constructor.apply(this,arguments)};return r.type=s,s.prototype=i,Object.defineProperty(s,".class.meta",{value:r,enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(i,".class",{value:s,enumerable:!1,configurable:!1,writable:!1}),n.statics&&o.extend(s,n.statics),s};function r(t,e){for(;t;){if(t.type.prototype===e.prototype)return!0;for(var n in t.implements){var o=t.implements[n],i=o[".class.meta"];if(i){if(r(i,e))return!0}else for(var s=o.prototype;s;s=s.__proto__)if(s===e.prototype)return!0}t=t.base?t.base[".class.meta"]:void 0}return!1}o.extend=n,o.clone=function(t){return n({},t)};var i=o({constructor:function(t){this.object=t},typeOf:function(t){if(this.object instanceof t)return!0;var e=o.typeInfo(this.object);return e&&r(e,t)}});i.prototype.a=i.prototype.typeOf,i.prototype.an=i.prototype.typeOf,o.is=function(t){return new i(t)},o.typeInfo=function(t){var e=t.__proto__[".class"];return e?e[".class.meta"]:void 0},o.VERSION=[0,0,2],e?e.exports=o:t.Class=o}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"biojs-io-fasta":[function(t,e,n){e.exports.parse=t("./parser"),e.exports.writer=t("./writer")},{"./parser":6,"./writer":9}],"biojs-vis-sequence":[function(t,e,n){e.exports=t("./lib/index")},{"./lib/index":1}]},{},["biojs-vis-sequence"]);var u=n(6540),l=n.n(u),h=(n(6860),n(4848));function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function f(){var t=_(),e=t.m(f),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function o(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var r={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(o){e||(e={stop:function(){return n(o.a,2)},catch:function(){return o.v},abrupt:function(t,e){return n(o.a,r[t],e)},delegateYield:function(t,r,i){return e.resultName=r,n(o.d,d(t),i)},finish:function(t){return n(o.f,t)}},n=function(t,n,r){o.p=e.prev,o.n=e.next;try{return t(n,r)}finally{e.next=o.n}}),e.resultName&&(e[e.resultName]=o.v,e.resultName=void 0),e.sent=o.v,e.next=o.n;try{return t.call(this,e)}finally{o.p=e.prev,o.n=e.next}}}return(f=function(){return{wrap:function(e,n,o,r){return t.w(i(e),n,o,r&&r.reverse())},isGeneratorFunction:o,mark:t.m,awrap:function(t,e){return new x(t,e)},AsyncIterator:y,async:function(t,e,n,r,s){return(o(e)?g:m)(i(t),e,n,r,s)},keys:v,values:d}})()}function d(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(p(t)+" is not iterable")}function v(t){var e=Object(t),n=[];for(var o in e)n.unshift(o);return function t(){for(;n.length;)if((o=n.pop())in e)return t.value=o,t.done=!1,t;return t.done=!0,t}}function m(t,e,n,o,r){var i=g(t,e,n,o,r);return i.next().then((function(t){return t.done?t.value:i.next()}))}function g(t,e,n,o,r){return new y(_().w(t,e,n,o),r||Promise)}function y(t,e){function n(o,r,i,s){try{var a=t[o](r),c=a.value;return c instanceof x?e.resolve(c.v).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(c).then((function(t){a.value=t,i(a)}),(function(t){return n("throw",t,i,s)}))}catch(t){s(t)}}var o;this.next||(w(y.prototype),w(y.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),w(this,"_invoke",(function(t,r,i){function s(){return new e((function(e,o){n(t,i,e,o)}))}return o=o?o.then(s,s):s()}),!0)}function _(){var t,e,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function i(n,o,r,i){var c=o&&o.prototype instanceof a?o:a,u=Object.create(c.prototype);return w(u,"_invoke",function(n,o,r){var i,a,c,u=0,l=r||[],h=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,a=0,c=t,p.n=n,s}};function f(n,o){for(a=n,c=o,e=0;!h&&u&&!r&&e<l.length;e++){var r,i=l[e],f=p.p,d=i[2];n>3?(r=d===o)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=f&&((r=n<2&&f<i[1])?(a=0,p.v=o,p.n=i[1]):f<d&&(r=n<3||i[0]>o||o>d)&&(i[4]=n,i[5]=o,p.n=d,a=0))}if(r||n>1)return s;throw h=!0,o}return function(r,l,d){if(u>1)throw TypeError("Generator is already running");for(h&&1===l&&f(l,d),a=l,c=d;(e=a<2?t:c)||!h;){i||(a?a<3?(a>1&&(p.n=-1),f(a,c)):p.n=c:p.v=c);try{if(u=2,i){if(a||(r="next"),e=i[r]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),a=1);i=t}else if((e=(h=p.n<0)?c:n.call(o,p))!==s)break}catch(e){i=t,a=1,c=e}finally{u=1}}return{value:e,done:h}}}(n,r,i),!0),u}var s={};function a(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][o]?e(e([][o]())):(w(e={},o,(function(){return this})),e),h=u.prototype=a.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,w(t,r,"GeneratorFunction")),t.prototype=Object.create(h),t}return c.prototype=u,w(h,"constructor",u),w(u,"constructor",c),c.displayName="GeneratorFunction",w(u,r,"GeneratorFunction"),w(h),w(h,r,"Generator"),w(h,o,(function(){return this})),w(h,"toString",(function(){return"[object Generator]"})),(_=function(){return{w:i,m:p}})()}function w(t,e,n,o){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}w=function(t,e,n,o){if(e)r?r(t,e,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[e]=n;else{var i=function(e,n){w(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},w(t,e,n,o)}function x(t,e){this.v=t,this.k=e}function S(t,e,n,o,r,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,r)}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,N(o.key),o)}}function C(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O(t,e,n){return e=T(e),function(t,e){if(e&&("object"==p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,k()?Reflect.construct(e,n||[],T(t).constructor):e.apply(t,n))}function k(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(k=function(){return!!t})()}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function A(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function D(t,e,n){return(e=N(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N(t){var e=function(t){if("object"!=p(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}var R=function(t){function e(t){var n;return q(this,e),D(n=O(this,e,[t]),"show",(function(t){var e;null===(e=n.modalRef.current)||void 0===e||e.showModal(),n.setState({requestCompleted:!1}),n.loadJSON(t)})),D(n,"hide",(function(){var t;null===(t=n.modalRef.current)||void 0===t||t.close()})),n.state={error_msgs:[],sequences:[],requestCompleted:!1,isModalVisible:!1},n.modalRef=(0,u.createRef)(),n}return A(e,t),C(e,[{key:"render",value:function(){var t=this.state,e=(t.isModalVisible,t.requestCompleted);return(0,h.jsx)("div",{className:"relative sequence-viewer-wrap",children:(0,h.jsx)("dialog",{ref:this.modalRef,className:"sequence-viewer fixed p-4 w-full max-w-2xl bg-transparent focus:outline-none overflow-visible z-50",children:(0,h.jsxs)("div",{className:"relative flex flex-col rounded-lg bg-white shadow",children:[(0,h.jsxs)("div",{className:"flex items-start justify-between rounded-t border-b p-5",children:[(0,h.jsx)("h3",{className:"text-xl font-medium text-gray-900",children:"View sequence"}),(0,h.jsx)("button",{className:"sequence-viewer-close ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-gray-400 hover:bg-gray-200",onClick:this.hide,children:(0,h.jsx)("i",{className:"fa-solid fa-xmark hover:text-black"})})]}),(0,h.jsx)("div",{className:"sequence-viewer-content max-h-[80vh] overflow-y-scroll",children:e&&this.resultsJSX()||this.loadingJSX()})]})})})}},{key:"loadJSON",value:(n=f().mark((function t(e){var n,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.json();case 6:o=t.sent,this.setState({sequences:o.sequences,error_msgs:o.error_msgs,requestCompleted:!0}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("Error fetching sequence:",t.t0),this.hide(),this.props.showErrorModal(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,10]])})),o=function(){var t=this,e=arguments;return new Promise((function(o,r){var i=n.apply(t,e);function s(t){S(i,o,r,s,a,"next",t)}function a(t){S(i,o,r,s,a,"throw",t)}s(void 0)}))},function(t){return o.apply(this,arguments)})},{key:"resultsJSX",value:function(){return(0,h.jsxs)("div",{className:"pt-2 px-6 pb-6 mt-2",children:[this.state.error_msgs.map((function(t,e){return(0,h.jsxs)("div",{className:"fastan",children:[(0,h.jsx)("div",{className:"section-header border-b border-seqorange pl-px table mb-0 w-full pb-2",children:(0,h.jsx)("h4",{className:"text-sm table-cell",children:t[0]})}),(0,h.jsx)("div",{className:"pt-0 px-0 pb-px",children:(0,h.jsx)("pre",{className:"m-0 p-0 rounded-none border-0 bg-inherit whitespace-pre-wrap break-keep",children:t[1]})})]},"error-message-".concat(e))})),this.state.sequences.map((function(t,e){return(0,h.jsx)(P,{sequence:t},"sequence-viewer-".concat(e))}))]})}},{key:"loadingJSX",value:function(){return(0,h.jsx)("div",{className:"my-4 text-center",children:(0,h.jsx)("i",{className:"fa fa-spinner fa-3x fa-spin"})})}}]);var n,o}(l().Component),P=function(t){function e(){return q(this,e),O(this,e,arguments)}return A(e,t),C(e,[{key:"render",value:function(){return this.widgetID=this.widgetClass+"-"+(new Date).getUTCMilliseconds(),(0,h.jsxs)("div",{className:"fastan",children:[(0,h.jsx)("div",{className:"section-header border-b border-seqorange pl-px table mb-0 w-full pb-2",children:(0,h.jsxs)("h4",{className:"text-sm table-cell",children:[this.props.sequence.id,(0,h.jsxs)("small",{className:"text-inherit",children:["Â  ",this.props.sequence.title]})]})}),(0,h.jsx)("div",{className:"fastan-content relative pt-0 px-0 pb-px",children:(0,h.jsx)("div",{className:this.widgetClass,id:this.widgetID})})]})}},{key:"componentDidMount",value:function(){var t=new Sequence({sequence:this.props.sequence.value,target:this.widgetID,format:"PRIDE",columns:{size:40,spacedEach:0},formatOptions:{title:!1,footer:!1}});setTimeout((function(){requestAnimationFrame((function(){t.hideFormatSelector()}))}))}}],[{key:"widgetClass",value:function(){return"biojs-vis-sequence"}}])}(l().Component)},6210:(t,e,n)=>{n.d(e,{A:()=>i});var o=n(3681),r=(0,o.mixin)(o);r._=r;const i=r}}]);
//# sourceMappingURL=sequence_modal.js.map