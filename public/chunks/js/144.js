"use strict";(self.webpackChunkSequenceServer=self.webpackChunkSequenceServer||[]).push([[144],{2144:(e,t,a)=>{a.r(t),a.d(t,{Databases:()=>f});var r=a(6540),n=a(6860),s=a(4848);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function l(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}function d(e,t,a){return t=y(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,a||[],y(e).constructor):t.apply(e,a))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var f=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=d(this,t,[e])).state={type:"",currentlySelectedDatabases:[]},a.preSelectedDbs=a.props.preSelectedDbs,a.databases=a.databases.bind(a),a.nselected=a.nselected.bind(a),a.categories=a.categories.bind(a),a.handleToggle=a.handleToggle.bind(a),a.renderDatabases=a.renderDatabases.bind(a),a.renderDatabase=a.renderDatabase.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),a=t,(r=[{key:"componentDidUpdate",value:function(e,t){this.databases()&&1===this.databases().length&&0===this.state.currentlySelectedDatabases.length&&this.setState({currentlySelectedDatabases:this.databases()}),this.preSelectedDbs&&0!==this.preSelectedDbs.length&&(this.setState({currentlySelectedDatabases:this.preSelectedDbs}),this.preSelectedDbs=null);var a=this.state.currentlySelectedDatabases[0]?this.state.currentlySelectedDatabases[0].type:"";a!=this.state.type&&(this.setState({type:a}),this.props.onDatabaseTypeChanged(a)),t.currentlySelectedDatabases!==this.state.currentlySelectedDatabases&&this.props.onDatabaseSelectionChanged(this.state.currentlySelectedDatabases)}},{key:"databases",value:function(e){var t=this.props.databases;return e&&(t=n.Ay.select(t,(function(t){return t.type===e}))),n.Ay.sortBy(t,"title")}},{key:"nselected",value:function(){return this.state.currentlySelectedDatabases.length}},{key:"categories",value:function(){return n.Ay.uniq(n.Ay.map(this.props.databases,n.Ay.iteratee("type"))).sort()}},{key:"handleToggle",value:function(e,t){switch(e){case"[Select all]":this.setState({currentlySelectedDatabases:this.databases(t)});break;case"[Deselect all]":this.setState({currentlySelectedDatabases:[]})}}},{key:"renderDatabases",value:function(e){var t=e[0].toUpperCase()+e.substring(1).toLowerCase()+" databases",a=1===this.categories().length?"col-span-2":"",r="[Select all]",i="px-2 text-base md:text-lg",o=this.databases(e).length>1,c=this.state.type&&this.state.type!==e;return i+=o&&c?" text-gray-400":" text-seqblue",o||(i+=" hidden"),this.nselected()===this.databases(e).length&&(r="[Deselect all]"),(0,s.jsx)("div",{className:a,children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"border-b border-seqorange mb-2",children:[(0,s.jsx)("h4",{className:"font-medium inline text-base md:text-lg",children:t}),(0,s.jsx)("button",{type:"button",className:i,disabled:c,onClick:function(){this.handleToggle(r,e)}.bind(this),children:r})]}),(0,s.jsx)("ul",{className:"databases "+e,children:n.Ay.map(this.databases(e),n.Ay.bind((function(t,a){return(0,s.jsx)("li",{className:"text-base md:text-lg leading-tight md:leading-tight",children:this.renderDatabase(t)},"DB_"+e+a)}),this))})]})},"DB_"+e)}},{key:"handleDatabaseSelectionClick",value:function(e){this.state.currentlySelectedDatabases.some((function(t){return t.id===e.id}))?this.setState((function(t){return{currentlySelectedDatabases:t.currentlySelectedDatabases.filter((function(t){return t.id!==e.id}))}})):this.setState((function(t){return{currentlySelectedDatabases:[].concat(o(t.currentlySelectedDatabases),[e])}}))}},{key:"renderDatabase",value:function(e){var t=this.state.type&&this.state.type!==e.type,a=this.state.currentlySelectedDatabases.some((function(t){return t.id===e.id}));return(0,s.jsxs)("label",{className:t?"database text-gray-400":"database text-seqblue",children:[(0,s.jsx)("input",{type:"checkbox",name:"databases[]",value:e.id,"data-type":e.type,disabled:t,checked:a,className:"checkbox-database",onChange:n.Ay.bind((function(){this.handleDatabaseSelectionClick(e)}),this)})," "+(e.title||e.name)]})}},{key:"render",value:function(){return(0,s.jsx)("div",{className:"my-6 grid md:grid-cols-2 gap-4",children:n.Ay.map(this.categories(),this.renderDatabases)})}}])&&l(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,r}(r.Component)}}]);
//# sourceMappingURL=144.js.map