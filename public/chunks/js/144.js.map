{"version":3,"file":"chunks/js/144.js","mappings":"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","sources":["webpack://SequenceServer/./public/js/databases.js"],"sourcesContent":["import React, { Component } from 'react';\nimport _ from 'underscore';\n\nexport class Databases extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            type: '',\n            currentlySelectedDatabases: [],\n        };\n\n        this.preSelectedDbs = this.props.preSelectedDbs;\n        this.databases = this.databases.bind(this);\n        this.nselected = this.nselected.bind(this);\n        this.categories = this.categories.bind(this);\n        this.handleToggle = this.handleToggle.bind(this);\n        this.renderDatabases = this.renderDatabases.bind(this);\n        this.renderDatabase = this.renderDatabase.bind(this);\n    }\n\n    componentDidUpdate(_prevProps, prevState) {\n        // If there's only one database, select it.\n        if (this.databases() && this.databases().length === 1 && this.state.currentlySelectedDatabases.length === 0) {\n            this.setState({currentlySelectedDatabases: this.databases()});\n        }\n\n        if (this.preSelectedDbs && this.preSelectedDbs.length !== 0) {\n            this.setState({currentlySelectedDatabases: this.preSelectedDbs});\n            this.preSelectedDbs = null;\n        }\n        const type = this.state.currentlySelectedDatabases[0] ? this.state.currentlySelectedDatabases[0].type : '';\n        if (type != this.state.type) {\n            this.setState({ type: type });\n            this.props.onDatabaseTypeChanged(type);\n        }\n\n        if (prevState.currentlySelectedDatabases !== this.state.currentlySelectedDatabases) {\n            // Call the prop function with the new state\n            this.props.onDatabaseSelectionChanged(this.state.currentlySelectedDatabases);\n        }\n\n    }\n\n    databases(category) {\n        var databases = this.props.databases;\n        if (category) {\n            databases = _.select(databases, (database) => database.type === category);\n        }\n\n        return _.sortBy(databases, 'title');\n    }\n\n    nselected() {\n        return this.state.currentlySelectedDatabases.length;\n    }\n\n    categories() {\n        return _.uniq(_.map(this.props.databases, _.iteratee('type'))).sort();\n    }\n\n    handleToggle(toggleState, type) {\n        switch (toggleState) {\n        case '[Select all]':\n            this.setState({ currentlySelectedDatabases: this.databases(type) });\n            break;\n        case '[Deselect all]':\n            this.setState({ currentlySelectedDatabases: [] });\n            break;\n        }\n    }\n\n    renderDatabases(category) {\n    // Panel name and column width.\n        var panelTitle = category[0].toUpperCase() + category.substring(1).toLowerCase() + ' databases';\n        var columnClass = this.categories().length === 1 ? 'col-span-2' : '';\n\n        // Toggle button.\n        var toggleState = '[Select all]';\n        var toggleClass = 'px-2 text-base md:text-lg';\n        var toggleShown = this.databases(category).length > 1;\n        var toggleDisabled = this.state.type && this.state.type !== category;\n        if (toggleShown && toggleDisabled) {\n            toggleClass += ' text-gray-400';\n        } else {\n            toggleClass += ' text-seqblue';\n        }\n        if (!toggleShown) toggleClass += ' hidden';\n        if (this.nselected() === this.databases(category).length) {\n            toggleState = '[Deselect all]';\n        }\n\n        // JSX.\n        return (\n            <div className={columnClass} key={'DB_' + category}>\n                <div>\n                    <div className=\"border-b border-seqorange mb-2\">\n                        <h4 className=\"font-medium inline text-base md:text-lg\">\n                            {panelTitle}\n                        </h4>\n                        <button\n                            type=\"button\"\n                            className={toggleClass}\n                            disabled={toggleDisabled}\n                            onClick={function () {\n                                this.handleToggle(toggleState, category);\n                            }.bind(this)}\n                        >\n                            {toggleState}\n                        </button>\n                    </div>\n                    <ul className={'databases ' + category}>\n                        {_.map(\n                            this.databases(category),\n                            _.bind(function (database, index) {\n                                return (\n                                    <li key={'DB_' + category + index} className=\"text-base md:text-lg leading-tight md:leading-tight\">\n                                        {this.renderDatabase(database)}\n                                    </li>\n                                );\n                            }, this)\n                        )}\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n\n    handleDatabaseSelectionClick(database) {\n        const isSelected = this.state.currentlySelectedDatabases.some(db => db.id === database.id);\n\n        if (isSelected) {\n            this.setState(prevState => ({\n                currentlySelectedDatabases: prevState.currentlySelectedDatabases.filter(db => db.id !== database.id)\n            }));\n        } else {\n            this.setState(prevState => ({\n                currentlySelectedDatabases: [...prevState.currentlySelectedDatabases, database]\n            }));\n        }\n    }\n\n    renderDatabase(database) {\n        const isDisabled = this.state.type && this.state.type !== database.type;\n        const isChecked = this.state.currentlySelectedDatabases.some(db => db.id === database.id);\n\n        return (\n            <label className={(isDisabled && 'database text-gray-400') || 'database text-seqblue'}>\n                <input\n                    type=\"checkbox\"\n                    name=\"databases[]\"\n                    value={database.id}\n                    data-type={database.type}\n                    disabled={isDisabled}\n                    checked={isChecked}\n                    className=\"checkbox-database\"\n                    onChange={_.bind(function () {\n                        this.handleDatabaseSelectionClick(database);\n                    }, this)}\n\n                />\n                {' ' + (database.title || database.name)}\n            </label>\n        );\n    }\n\n    render() {\n        return (\n            <div className=\"my-6 grid md:grid-cols-2 gap-4\">\n                {_.map(this.categories(), this.renderDatabases)}\n            </div>\n        );\n    }\n}\n"],"names":["Databases","_Component","props","_this","_classCallCheck","_callSuper","state","type","currentlySelectedDatabases","preSelectedDbs","databases","bind","nselected","categories","handleToggle","renderDatabases","renderDatabase","_inherits","key","value","_prevProps","prevState","this","length","setState","onDatabaseTypeChanged","onDatabaseSelectionChanged","category","_","database","sort","toggleState","panelTitle","toUpperCase","substring","toLowerCase","columnClass","toggleClass","toggleShown","toggleDisabled","_jsx","className","children","_jsxs","disabled","onClick","index","some","db","id","filter","concat","_toConsumableArray","isDisabled","isChecked","name","checked","onChange","handleDatabaseSelectionClick","title","Component"],"sourceRoot":""}